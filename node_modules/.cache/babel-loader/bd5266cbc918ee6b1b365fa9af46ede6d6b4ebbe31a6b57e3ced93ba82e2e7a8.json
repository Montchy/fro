{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TTextCtor = exports.default = void 0;\nvar _HTMLContentModel = _interopRequireDefault(require(\"../model/HTMLContentModel\"));\nvar _compose = _interopRequireDefault(require(\"ramda/src/compose\"));\nvar _textTransforms = require(\"../flow/text-transforms\");\nvar _TNodeCtor = _interopRequireDefault(require(\"./TNodeCtor\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nconst collapseWhiteSpaces = (0, _compose.default)(_textTransforms.normalizeWhitespaces, _textTransforms.replaceSegmentBreaks, _textTransforms.normalizeZeroWidthWhitespaces, _textTransforms.removeConsecutiveSegmentBreaks, _textTransforms.removeCollapsibleAroundSegmentBreak);\nconst collapseWhiteSpacesWithEastAsianCharset = (0, _compose.default)(_textTransforms.normalizeWhitespaces, _textTransforms.replaceSegmentBreaks, _textTransforms.removeLineBreaksAroundEastAsianDiscardSet, _textTransforms.normalizeZeroWidthWhitespaces, _textTransforms.removeConsecutiveSegmentBreaks, _textTransforms.removeCollapsibleAroundSegmentBreak);\nconst TTextCtor = function TText(init) {\n  this.initialize(init);\n  this.isVoid = this.elementModel ? this.elementModel.isVoid : false;\n}; //@ts-ignore\n\nexports.TTextCtor = TTextCtor;\nTTextCtor.prototype = new _TNodeCtor.default('text', 'TText', {\n  data: {\n    get() {\n      return this.init.textNode.data;\n    },\n    set(data) {\n      this.init.textNode.data = data;\n    }\n  }\n});\nTTextCtor.prototype.matchContentModel = function matchContentModel(contentModel) {\n  return contentModel === _HTMLContentModel.default.textual || contentModel === _HTMLContentModel.default.mixed;\n};\nTTextCtor.prototype.isCollapsibleLeft = function isCollapsibleLeft() {\n  return this.hasWhiteSpaceCollapsingEnabled && !this.isEmpty() && this.data[0] === ' ';\n};\nTTextCtor.prototype.isCollapsibleRight = function isCollapsibleRight() {\n  return this.hasWhiteSpaceCollapsingEnabled && !this.isEmpty() && (this.isVoid || this.data[this.data.length - 1] === ' ');\n};\nTTextCtor.prototype.isEmpty = function isEmpty() {\n  // Only anonymous text nodes can be considered \"empty\"\n  return this.tagName === null && !this.data.length;\n};\nTTextCtor.prototype.trimLeft = function trimLeft() {\n  if (this.isCollapsibleLeft()) {\n    this.data = this.data.slice(1);\n  }\n};\nTTextCtor.prototype.trimRight = function trimRight() {\n  if (this.isCollapsibleRight()) {\n    this.data = this.data.substr(0, this.data.length - 1);\n  }\n};\nTTextCtor.prototype.collapseChildren = function collapseChildren() {\n  if (this.hasWhiteSpaceCollapsingEnabled) {\n    if (this.init.context.removeLineBreaksAroundEastAsianDiscardSet) {\n      this.data = collapseWhiteSpacesWithEastAsianCharset(this.data);\n    } else {\n      this.data = collapseWhiteSpaces(this.data);\n    }\n  }\n  return null;\n};\nvar _default = TTextCtor;\nexports.default = _default;","map":{"version":3,"names":["_HTMLContentModel","_interopRequireDefault","require","_compose","_textTransforms","_TNodeCtor","collapseWhiteSpaces","default","normalizeWhitespaces","replaceSegmentBreaks","normalizeZeroWidthWhitespaces","removeConsecutiveSegmentBreaks","removeCollapsibleAroundSegmentBreak","collapseWhiteSpacesWithEastAsianCharset","removeLineBreaksAroundEastAsianDiscardSet","TTextCtor","TText","init","initialize","isVoid","elementModel","prototype","data","get","textNode","set","matchContentModel","contentModel","textual","mixed","isCollapsibleLeft","hasWhiteSpaceCollapsingEnabled","isEmpty","isCollapsibleRight","length","tagName","trimLeft","slice","trimRight","substr","collapseChildren","context"],"sources":["/Users/amelieploil/Desktop/Diploma/kinskyfe/node_modules/@native-html/transient-render-engine/lib/commonjs/tree/TTextCtor.ts"],"sourcesContent":["import { Text } from '../dom/dom-utils';\nimport HTMLContentModel from '../model/HTMLContentModel';\n\nimport compose from 'ramda/src/compose';\nimport { TNodeInit, TNodeImpl } from './tree-types';\nimport {\n  normalizeWhitespaces,\n  normalizeZeroWidthWhitespaces,\n  removeCollapsibleAroundSegmentBreak,\n  removeConsecutiveSegmentBreaks,\n  removeLineBreaksAroundEastAsianDiscardSet,\n  replaceSegmentBreaks\n} from '../flow/text-transforms';\nimport TNodeCtor, { GenericTNodeCtor, Mutable } from './TNodeCtor';\n\nexport interface TTextInit extends TNodeInit {\n  readonly textNode: Text;\n}\n\nexport interface TTextImpl extends TNodeImpl<TTextInit> {\n  readonly data: string;\n  /**\n   * True when tagName is defined and should be substituted with text when\n   * rendering. E.g. <br> tags.\n   */\n  readonly isVoid: boolean;\n}\n\nconst collapseWhiteSpaces = compose(\n  normalizeWhitespaces,\n  replaceSegmentBreaks,\n  normalizeZeroWidthWhitespaces,\n  removeConsecutiveSegmentBreaks,\n  removeCollapsibleAroundSegmentBreak\n);\n\nconst collapseWhiteSpacesWithEastAsianCharset = compose(\n  normalizeWhitespaces,\n  replaceSegmentBreaks,\n  removeLineBreaksAroundEastAsianDiscardSet,\n  normalizeZeroWidthWhitespaces,\n  removeConsecutiveSegmentBreaks,\n  removeCollapsibleAroundSegmentBreak\n);\n\nconst TTextCtor = function TText(this: Mutable<TTextImpl>, init: TTextInit) {\n  this.initialize(init);\n  this.isVoid = this.elementModel ? this.elementModel.isVoid : false;\n} as Function as GenericTNodeCtor<TTextInit, TTextImpl>;\n\n//@ts-ignore\nTTextCtor.prototype = new TNodeCtor('text', 'TText', {\n  data: {\n    get(this: TTextImpl) {\n      return this.init.textNode.data;\n    },\n    set(this: TTextImpl, data: string) {\n      this.init.textNode.data = data;\n    }\n  }\n});\n\nTTextCtor.prototype.matchContentModel = function matchContentModel(\n  contentModel: HTMLContentModel\n) {\n  return (\n    contentModel === HTMLContentModel.textual ||\n    contentModel === HTMLContentModel.mixed\n  );\n};\n\nTTextCtor.prototype.isCollapsibleLeft = function isCollapsibleLeft(\n  this: TTextImpl\n) {\n  return (\n    this.hasWhiteSpaceCollapsingEnabled &&\n    !this.isEmpty() &&\n    this.data[0] === ' '\n  );\n};\n\nTTextCtor.prototype.isCollapsibleRight = function isCollapsibleRight(\n  this: TTextImpl\n) {\n  return (\n    this.hasWhiteSpaceCollapsingEnabled &&\n    !this.isEmpty() &&\n    (this.isVoid || this.data[this.data.length - 1] === ' ')\n  );\n};\n\nTTextCtor.prototype.isEmpty = function isEmpty(this: TTextImpl) {\n  // Only anonymous text nodes can be considered \"empty\"\n  return this.tagName === null && !this.data.length;\n};\n\nTTextCtor.prototype.trimLeft = function trimLeft(this: Mutable<TTextImpl>) {\n  if (this.isCollapsibleLeft()) {\n    this.data = this.data.slice(1);\n  }\n};\n\nTTextCtor.prototype.trimRight = function trimRight(this: Mutable<TTextImpl>) {\n  if (this.isCollapsibleRight()) {\n    this.data = this.data.substr(0, this.data.length - 1);\n  }\n};\n\nTTextCtor.prototype.collapseChildren = function collapseChildren(\n  this: Mutable<TTextImpl>\n) {\n  if (this.hasWhiteSpaceCollapsingEnabled) {\n    if (this.init.context.removeLineBreaksAroundEastAsianDiscardSet) {\n      this.data = collapseWhiteSpacesWithEastAsianCharset(this.data);\n    } else {\n      this.data = collapseWhiteSpaces(this.data);\n    }\n  }\n  return null;\n};\n\nexport default TTextCtor;\n\nexport { TTextCtor };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}