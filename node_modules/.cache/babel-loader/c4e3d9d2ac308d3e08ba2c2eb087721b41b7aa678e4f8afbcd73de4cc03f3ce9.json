{"ast":null,"code":"import ApiService from \"../Application/ApiService\";\n\n/**\n * Führt eine Fetch-Funktion aus, protokolliert die Antwort und behandelt Fehler.\n */\nconst fetchAndLog = async (type, fetchFunction) => {\n  if (typeof fetchFunction !== \"function\") {\n    console.error(`❌ Fehler: ${type} API-Aufruf existiert nicht!`);\n    return [];\n  }\n  try {\n    const response = await fetchFunction();\n    if (!response) {\n      console.warn(`${type} API hat keine Daten zurückgegeben.`);\n      return [];\n    }\n    return sanitizeData(response);\n  } catch (error) {\n    console.error(`Fehler beim Abrufen von ${type}:`, error);\n    return [];\n  }\n};\n\n/**\n * Entfernt zirkuläre Referenzen und verschachtelte Strukturen.\n */\nconst sanitizeData = (data, seen = new WeakSet()) => {\n  if (data && typeof data === 'object') {\n    if (seen.has(data)) {\n      return undefined;\n    }\n    seen.add(data);\n    const sanitized = Array.isArray(data) ? [] : {};\n    for (const key in data) {\n      if (key === 'betreuer' || key === 'einbringer' || key === 'vermittler') {\n        sanitized[key] = undefined;\n      } else {\n        sanitized[key] = sanitizeData(data[key], seen);\n      }\n    }\n    return sanitized;\n  }\n  return data;\n};\n\n/**\n * Ruft alle Personen aus verschiedenen Endpunkten ab und führt sie zu einer Liste zusammen.\n */\nexport const fetchAllPersons = async () => {\n  console.log(\"Vermittler-Methode vorhanden?\", typeof ApiService.fetchVERMITTLER === \"function\");\n  console.log(\"Einbringer-Methode vorhanden?\", typeof ApiService.fetchEINBRINGER === \"function\");\n  console.log(\"Betreuer-Methode vorhanden?\", typeof ApiService.fetchBETREUER === \"function\");\n  try {\n    const vermittler = await fetchAndLog(\"Vermittler\", ApiService.fetchVERMITTLER);\n    const einbringer = await fetchAndLog(\"Einbringer\", ApiService.fetchEINBRINGER);\n    const betreuer = await fetchAndLog(\"Betreuer\", ApiService.fetchBETREUER);\n    const allPersons = [...sanitizePersons(vermittler, \"Vermittler\"), ...sanitizePersons(einbringer, \"Einbringer\"), ...sanitizePersons(betreuer, \"Betreuer\")];\n    return allPersons;\n  } catch (error) {\n    console.error(\"Fehler beim Abrufen der Personen:\", error);\n    throw error;\n  }\n};\n\n/**\n * Bereinigt und formatiert die Liste der Personen.\n */\nconst sanitizePersons = (persons, type) => {\n  if (!Array.isArray(persons)) {\n    console.warn(`Erwartete ein Array, aber erhalten:`, persons);\n    return [];\n  }\n  return persons.map(person => {\n    var _person$email, _person$adresse, _person$adresse2, _person$adresse3;\n    return {\n      id: person.id,\n      vorname: person.vorname || \"Unbekannt\",\n      nachname: person.nachname || \"Unbekannt\",\n      email: ((_person$email = person.email) === null || _person$email === void 0 ? void 0 : _person$email.address) || \"Keine Email\",\n      telefon: person.tel || \"Keine Telefonnummer\",\n      adresse: [((_person$adresse = person.adresse) === null || _person$adresse === void 0 ? void 0 : _person$adresse.strasse) || \"\", ((_person$adresse2 = person.adresse) === null || _person$adresse2 === void 0 ? void 0 : _person$adresse2.ort) || \"\", ((_person$adresse3 = person.adresse) === null || _person$adresse3 === void 0 ? void 0 : _person$adresse3.land) || \"\"].filter(Boolean).join(\", \"),\n      typ: type\n    };\n  });\n};","map":{"version":3,"names":["ApiService","fetchAndLog","type","fetchFunction","console","error","response","warn","sanitizeData","data","seen","WeakSet","has","undefined","add","sanitized","Array","isArray","key","fetchAllPersons","log","fetchVERMITTLER","fetchEINBRINGER","fetchBETREUER","vermittler","einbringer","betreuer","allPersons","sanitizePersons","persons","map","person","_person$email","_person$adresse","_person$adresse2","_person$adresse3","id","vorname","nachname","email","address","telefon","tel","adresse","strasse","ort","land","filter","Boolean","join","typ"],"sources":["/Users/amelieploil/Desktop/Diploma/kinskyfe/src/Application/personService.js"],"sourcesContent":["import ApiService from \"../Application/ApiService\";\n\n/**\n * Führt eine Fetch-Funktion aus, protokolliert die Antwort und behandelt Fehler.\n */\nconst fetchAndLog = async (type, fetchFunction) => {\n    if (typeof fetchFunction !== \"function\") {\n        console.error(`❌ Fehler: ${type} API-Aufruf existiert nicht!`);\n        return [];\n    }\n\n    try {\n        const response = await fetchFunction();\n\n        if (!response) {\n            console.warn(`${type} API hat keine Daten zurückgegeben.`);\n            return [];\n        }\n\n        return sanitizeData(response);\n    } catch (error) {\n        console.error(`Fehler beim Abrufen von ${type}:`, error);\n        return [];\n    }\n};\n\n/**\n * Entfernt zirkuläre Referenzen und verschachtelte Strukturen.\n */\nconst sanitizeData = (data, seen = new WeakSet()) => {\n    if (data && typeof data === 'object') {\n        if (seen.has(data)) {\n            return undefined;\n        }\n        seen.add(data);\n\n        const sanitized = Array.isArray(data) ? [] : {};\n        for (const key in data) {\n            if (key === 'betreuer' || key === 'einbringer' || key === 'vermittler') {\n                sanitized[key] = undefined;\n            } else {\n                sanitized[key] = sanitizeData(data[key], seen);\n            }\n        }\n        return sanitized;\n    }\n    return data;\n};\n\n/**\n * Ruft alle Personen aus verschiedenen Endpunkten ab und führt sie zu einer Liste zusammen.\n */\nexport const fetchAllPersons = async () => {\n    console.log(\"Vermittler-Methode vorhanden?\", typeof ApiService.fetchVERMITTLER === \"function\");\n    console.log(\"Einbringer-Methode vorhanden?\", typeof ApiService.fetchEINBRINGER === \"function\");\n    console.log(\"Betreuer-Methode vorhanden?\", typeof ApiService.fetchBETREUER === \"function\");\n\n\n    try {\n        const vermittler = await fetchAndLog(\"Vermittler\", ApiService.fetchVERMITTLER);\n        const einbringer = await fetchAndLog(\"Einbringer\", ApiService.fetchEINBRINGER);\n        const betreuer = await fetchAndLog(\"Betreuer\", ApiService.fetchBETREUER);\n\n        const allPersons = [\n            ...sanitizePersons(vermittler, \"Vermittler\"),\n            ...sanitizePersons(einbringer, \"Einbringer\"),\n            ...sanitizePersons(betreuer, \"Betreuer\"),\n        ];\n\n        return allPersons;\n    } catch (error) {\n        console.error(\"Fehler beim Abrufen der Personen:\", error);\n        throw error;\n    }\n};\n\n/**\n * Bereinigt und formatiert die Liste der Personen.\n */\nconst sanitizePersons = (persons, type) => {\n    if (!Array.isArray(persons)) {\n        console.warn(`Erwartete ein Array, aber erhalten:`, persons);\n        return [];\n    }\n\n    return persons.map(person => ({\n        id: person.id,\n        vorname: person.vorname || \"Unbekannt\",\n        nachname: person.nachname || \"Unbekannt\",\n        email: person.email?.address || \"Keine Email\",\n        telefon: person.tel || \"Keine Telefonnummer\",\n        adresse: [\n            person.adresse?.strasse || \"\",\n            person.adresse?.ort || \"\",\n            person.adresse?.land || \"\",\n        ].filter(Boolean).join(\", \"),\n        typ: type,\n    }));\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}